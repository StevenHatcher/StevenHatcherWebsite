<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SH StatTracker</title>
    <link rel="stylesheet" href="/style.css">
</head>

<script src="/js/navbar_height.js" defer></script>
<script src="/js/portfolio_traversal.js" defer></script>

<body>

  <nav id="navbar">
    <!-- <img src="images/signature.png" alt="Logo" class="icon" /> -->
    <a href="/index.html" class="nav-left" >Steven Hatcher</a>

    <!-- Hamburger Button -->
      <button class="mobile-nav-menu" onclick="toggleMenu()">☰</button>


    <div class="nav-links" id="mobileMenu">
        <a href="/index.html">Home</a>
        <a href="/portfolio.html">Portfolio</a>
        <a href="/resume.html">Resume</a>
        <a href="/about.html">About Me</a>
    </div>
</nav>

<div class="side-nav">
  <div class="side-nav-back">
    <button class="back-button" onclick="window.history.back();">← Back</button>
  </div>
  <div class="side-nav-links">
    <div class="section-link" onclick="scrollToSection('overview')">Overview</div>
    <!-- <div class="section-link" onclick="scrollToSection('demo')">Demo</div> -->
    <div class="section-link" onclick="scrollToSection('functionality')">Functionality</div>
    <div class="section-link" onclick="scrollToSection('information')">Information</div>
  </div>
</div>

<!-- Entire Project Page Container -->
 
  <div class="landing">
    <!-- Title Section -->
    <div class="landing-title-section project-title">
      <div class="section-row tech">
        
        <a href="https://www.python.org/"class="tech-tile" target="_blank" rel="noopener noreferrer">Python</a>
        <a href="https://github.com/tesseract-ocr/tesseract"class="tech-tile"target="_blank" rel="noopener noreferrer">Tesseract OCR</a>
        <a href="https://developer.chrome.com/docs/chromedriver" class="tech-tile"target="_blank" rel="noopener noreferrer">ChromeDrive & Selenium</a>
        <a href="https://pyautogui.readthedocs.io/en/latest/" class="tech-tile"target="_blank" rel="noopener noreferrer">Pyautogui</a>
        <a href="https://pandas.pydata.org/" class="tech-tile"target="_blank" rel="noopener noreferrer">Pandas</a>
       </div>
      <div >
        <div class = "section-row mobile-full-width">
        <a href="https://github.com/StevenHatcher/SkillDetect" target="_blank" rel="noopener noreferrer" ><img src="/images/github_logo.png" class="github-icon">
        <h1>Enemy Stat Tracker</h1>
        <!-- <img src="/images/portfolio/SkillDetect/profile_page.png" class="restrict-height" alt="Screenshot"> -->
      </a>
    </div>

      <h4>Automatically view and track the statistics of enemies that defeat you in Fortnite the moment you are eliminated.</h4>

      </div>
    </div>  
   
      
        <!-- Section: Overview -->
      <div class="section" id="overview">
        <h2>Overview</h2>
        <p>This Python program combines OCR (Optical Character Recognition) and ChromeDriver
          functionalities to detect when an icon is present on thes screen, then uses its position to
          calculate the size and location of the
          text that will be positioned relative to the icon. This text is read with an OCR, and used
          to open a temporary, locally-hosted, instance of a webpage, where JSON data is stored & used
          to pull data using a proprietary library I created. These values are then stored in a new
          row of a .xlsx spreadsheet and the average of each column is written to the top of its
          respective column. Then, the program will once again wait in the background until the player is eliminated again.<br><br>
          The primary intention is to have this program running in the backround 
          whenever you are playing, allowing the statistics to be collected over time and allowing you to see the enemy's stats briefly after being eliminated.</p>
      </div>

      <!-- Section: Image and Description -->
      <div class="section" id="functionality">
        <h2>Functionality</h2>
        <h3>Image recognition</h3>
        <div class="section-row background title">
          
          <div class="section-tile text">
            <p>The screen is scanned every second for crosshair icon which indicates the player has been eliminated.</p>
            <p>The program waits until this icon is detected to begin.</p>
          </div>
          <div class="section-tile">
            <img src="/images/portfolio/SkillDetect/caseSpecificCH.png" style="border-radius:50%;" class="crosshair" alt="Screenshot">    
          </div>
        </div>

        <h3>Locating and processing username</h3>

          <div class="section-row background title">
            <h3>Locating</h3>
            <div class="section-tile">
              <div class="section-row">
                <p class="section-tile text fill">The sizing and position of the enemy's username is dynamic based on its length. However, the crosshair icon's position is absolute in relation to the username.
                  Using this information and a sufficient sample size, I was able to calculate the linear regression model of the username's dimensions and position as a percentage of the screen-width.
                </p>
              
                <img src="/images/portfolio/SkillDetect/Regression_mode.png" class="section-tile image fourty-percent" alt="Screenshot">
              </div>

              <div class="section-row">
                <img src="/images/portfolio/SkillDetect/username_screen_cropped.png" class="section-tile  full-width" alt="Screenshot">
              </div>
            </div>
          </div>

          <div class="section-row background title">
            <h3>Processing</h3>

            <div class="section-row">
              <p class="section-tile fill">For more consistent results when extracting text from the screen, the screenshot taken of the enemy's username is ran through two steps of preprocessing.</p>
              <div class="section-tile">
                <div class="section-row">
                  <p class="section-tile fill" style="font-weight:bold;">1. Original image:</p>
                  <img src="/images/portfolio/SkillDetect/unprocessed_username.png" class="section-tile full-width" alt="Screenshot">
                </div>
                <div class="section-row">
                  <p class="section-tile fill" style="font-weight:bold;">2. Grayscale:</p>
                  <img src="/images/portfolio/SkillDetect/unprocessed_username.png" class="section-tile full-width grayscale" alt="Screenshot">

                </div>
                <div class="section-row">
                  <p class="section-tile fill" style="font-weight:bold;">3. Threshhold</p>
                  <img src="/images/portfolio/SkillDetect/processed_username.png" class="section-tile full-width" alt="Screenshot">
                </div>
              </div>
              
           </div>

      </div>


      <h3>Data extraction</h3>
      <div class="section-row background title">
        <h3>Statistics</h3>
      <div class="column">
          <div class="section-row">
            <div class="section-tile text">
              <p class="fill">When the enemy's username has been extracted successfully from the processed image, a webbrowser instance of their stats page is opened. The JSON data of their stats is then obtained
                using the proprietary open-source library I created to do so, and used to get their playtime and KD ratio.
              </p>
            </div>
            
              <img src="/images/portfolio/SkillDetect/profile_page.png" class="section-tile image full-width" alt="Screenshot">
      
          </div>

          <div class="section-row">
              <p class="section-tile text fill">When the player's statistics are retrieved succesfully, they are added to a spreadsheet in the program directory and the average of the collected stats is updated in the second row.</p>
            <img src="/images/portfolio/SkillDetect/spreadsheet_full.png" class="section-tile image fourty-percent" alt="Screenshot">
            
          </div>
    </div>



  </div>
   

  <div class="section title" id="information">
    <h2>Notable Information</h2>
    <h3>Additional features</h3>
    <div class="section-row background title">
      <p class="section-tile text fill">
        1. Function parameters are provided for the user to control if the window of the enemy's statistic page autocloses or not, and if they chose for it to autoclose, how many seconds the page remains open for.<br><br>
        2. A second branch is provided on Github for if the user strictly wants the webpage to open without logging any data to the spreadhseet.<br><br>
      </p>
    </div>
    <h3>OCR Training</h3>
    <div class="section-row background title">
            <p class="section-tile text fill">While developing this software, I face a couple problems with extracting the username text from the screen using an OCR. The first problem was that the font used
              in Fortnite is rather stylized, making it difficult for the OCR to read. Attempting to train the model using .tif line images with their respective ground-truth texts in a Linux subsystem proved to be futile.
              Training models were seeing some success, but ultimately ended up skewed. There were a few specific character pairs that the OCR had trouble distinguishing (e.g. I and 1, G and 6), so I focused on training the model on
              the characters that it struggled with the most. However, this led to overfitting withinin the model, developing a tendency to read those characters (this effect was notable regardless of the number of training iterations (100, 1K, 10K)).
              <br><br>I attempted to use Paddle OCR, however, it ended up being even less consistent. Processing the photo before passing it through Tesseract OCR (untrained) yielded surprising accurate
              and consistent results
            </p>
            
          <div class="section-tile">
            <img src="/images/portfolio/SkillDetect/ocr_training.png" class="section-tile">
          </div>
        </div>


        <h3>Limitations</h3>
        <div class="section-row background title">
          <p class="section-tile text fill">
                1. While I have set up the OCR in a way that makes it reliable, it is still possible for it to misread text. Moreover, the lower-bound threshold value is 230, so values between 231-255 could be included unintentionally.
                However, the threshold can be adjusted easily.<br><br>
                2. Usernames can include non-English characters, which arent accounted for in the chosen OCR configuration. The fail-safe in place is that the website won't be retrieve the JSON, and will return nothing.<br><br>
                3. I haven't yet tested if the software works when playing Fortnite on resolution that isn't the monitors native resolution. This may cause issues when detected the crosshair icon asset.<br><br>
              </p>
           
            </div>
    </div>

      <!-- Section: Technologies -->
     
      <div class="section-row" id="overview">
          <div class="section-tile"> </div>
          <div class="section-tile main-buttons" onclick="scrollToSection('overview')"><button>Top</button></div>
          <div class="section-tile"> </div>
        </div>
          
      </div>

      <!-- Section: Conclusion -->
      <!-- <div class="section-row" id="Conclusion">
        <h2>Conclusion</h2>
        <p>This layout ensures consistency and flexibility across project pages.</p>
      </div> -->

   

</div>
  </div>


  </body>



</html>